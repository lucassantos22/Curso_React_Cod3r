{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/lucas/TI/Curso-React-Cod3r/projeto-pessoal/src/components/Home.js\";\nimport React, { Component, useState } from 'react';\nimport Table from './templates/Table';\nimport Form from './templates/Form';\nimport { Card, Nav, Spinner } from 'react-bootstrap';\nimport { Check, CardText, ListTask, Exclamation } from 'react-bootstrap-icons';\nimport { connect } from 'react-redux';\nimport { changeVision } from '../store/actions/whichTableIsVisible';\nimport { updateTasks } from '../store/actions/tasks';\nimport axios from 'axios';\nconst URL = 'https://todo-backend-express.herokuapp.com/';\n\nconst mapStateToProps = state => {\n  return {\n    whichTableIsVisible: state.whichTableIsVisible.whichTableIsVisible,\n    tasks: state.users.tasks\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeVision(trueOrFalse) {\n      dispatch(changeVision(trueOrFalse));\n    },\n\n    updateTasks(userList) {\n      dispatch(updateTasks(userList));\n    }\n\n  };\n};\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  async componentWillMount() {\n    this.updateTasks();\n  }\n\n  async componentDidUpdate() {\n    this.updateTasks();\n  }\n\n  async updateTasks() {\n    const tasks = await axios.get(URL);\n    this.sortTasksByOrder(tasks.data);\n    if (JSON.stringify(tasks.data) == JSON.stringify(this.props.tasks)) return;\n    this.props.updateTasks(tasks.data);\n  }\n\n  sortTasksByOrder(taskList) {\n    taskList.sort((firstTask, secondTask) => {\n      return firstTask.order < secondTask.order ? -1 : firstTask.order > secondTask.order ? 1 : 0;\n    });\n  }\n\n  async completeTask(url, completed) {\n    await axios.patch(url, {\n      completed\n    });\n    await this.updateTasks();\n  }\n\n  async deleteCompletedTasks() {\n    const completedTasks = this.props.tasks.filter(task => task.completed);\n\n    for (const completedTask of completedTasks) {\n      await axios.delete(completedTask.url);\n    }\n\n    if (completedTasks.length === 0) {\n      alert('Não existem tarefas completas no momento');\n      return;\n    }\n\n    await this.updateTasks();\n  }\n\n  async editTask(url, title) {\n    if (title.length === 0) {\n      alert('A tarefa deve ter um título');\n    }\n\n    await axios.patch(url, {\n      title\n    });\n    await this.updateTasks();\n  }\n\n  async deleteTask(url) {\n    const confirmation = window.confirm('Tem certeza que deseja excluir?');\n\n    if (confirmation) {\n      await axios.delete(url);\n      await this.updateTasks();\n    }\n  }\n\n  filterTasksCompleteds() {\n    return this.props.tasks.filter(task => task.completed);\n  }\n\n  filterTasksNotCompleteds() {\n    return this.props.tasks.filter(task => !task.completed);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        variant: \"info\",\n        style: {\n          position: 'absolute',\n          zIndex: '1',\n          left: '50%',\n          top: '40%'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          children: /*#__PURE__*/_jsxDEV(Nav, {\n            variant: \"tabs\",\n            defaultActiveKey: \"#first\",\n            children: [/*#__PURE__*/_jsxDEV(Nav.Item, {\n              children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                active: this.props.whichTableIsVisible === 1 ? true : false,\n                onClick: () => this.props.changeVision(1),\n                children: /*#__PURE__*/_jsxDEV(ListTask, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 139\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Nav.Item, {\n              children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                active: this.props.whichTableIsVisible === 2 ? true : false,\n                onClick: () => this.props.changeVision(2),\n                children: /*#__PURE__*/_jsxDEV(Exclamation, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 139\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Nav.Item, {\n              children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                active: this.props.whichTableIsVisible === 3 ? true : false,\n                onClick: () => this.props.changeVision(3),\n                children: /*#__PURE__*/_jsxDEV(Check, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 139\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Nav.Item, {\n              children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                active: this.props.whichTableIsVisible === 4 ? true : false,\n                onClick: () => this.props.changeVision(4),\n                children: /*#__PURE__*/_jsxDEV(CardText, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 139\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: this.props.whichTableIsVisible === 1 ? /*#__PURE__*/_jsxDEV(Table, {\n            title: \"Tarefas\",\n            deleteTask: url => this.deleteTask(url),\n            completeTask: (url, completed) => this.completeTask(url, completed),\n            editTask: (url, title) => this.editTask(url, title),\n            tasks: this.props.tasks,\n            completed: \"trueAndFalse\",\n            deleteCompletedTasks: () => this.deleteCompletedTasks()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 21\n          }, this) : this.props.whichTableIsVisible === 2 ? /*#__PURE__*/_jsxDEV(Table, {\n            title: \"A fazer\",\n            deleteTask: url => this.deleteTask(url),\n            completeTask: (url, completed) => this.completeTask(url, completed),\n            editTask: (url, title) => this.editTask(url, title),\n            tasks: this.filterTasksNotCompleteds(),\n            deleteCompletedTasks: () => this.deleteCompletedTasks()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 21\n          }, this) : this.props.whichTableIsVisible === 3 ? /*#__PURE__*/_jsxDEV(Table, {\n            title: \"Conlu\\xEDdas\",\n            deleteTask: url => this.deleteTask(url),\n            completeTask: (url, completed) => this.completeTask(url, completed),\n            editTask: (url, title) => this.editTask(url, title),\n            tasks: this.filterTasksCompleteds(),\n            completed: true,\n            deleteCompletedTasks: () => this.deleteCompletedTasks()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(Form, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 23\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["/home/lucas/TI/Curso-React-Cod3r/projeto-pessoal/src/components/Home.js"],"names":["React","Component","useState","Table","Form","Card","Nav","Spinner","Check","CardText","ListTask","Exclamation","connect","changeVision","updateTasks","axios","URL","mapStateToProps","state","whichTableIsVisible","tasks","users","mapDispatchToProps","dispatch","trueOrFalse","userList","Home","constructor","props","componentWillMount","componentDidUpdate","get","sortTasksByOrder","data","JSON","stringify","taskList","sort","firstTask","secondTask","order","completeTask","url","completed","patch","deleteCompletedTasks","completedTasks","filter","task","completedTask","delete","length","alert","editTask","title","deleteTask","confirmation","window","confirm","filterTasksCompleteds","filterTasksNotCompleteds","render","position","zIndex","left","top"],"mappings":"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","sourcesContent":["import React, {Component, useState} from 'react';\nimport Table from './templates/Table';\nimport Form from './templates/Form';\n\nimport {Card, Nav, Spinner} from 'react-bootstrap';\nimport {Check, CardText, ListTask, Exclamation} from 'react-bootstrap-icons';\n\nimport {connect} from 'react-redux';\nimport {changeVision} from '../store/actions/whichTableIsVisible';\nimport {updateTasks} from '../store/actions/tasks';\n\nimport axios from 'axios';\n\nconst URL = 'https://todo-backend-express.herokuapp.com/';\n\nconst mapStateToProps = state =>{\n    return {\n        whichTableIsVisible: state.whichTableIsVisible.whichTableIsVisible,\n        tasks: state.users.tasks\n    }\n}\n\nconst mapDispatchToProps = dispatch =>{\n    return {\n        changeVision(trueOrFalse) {\n            dispatch(changeVision(trueOrFalse));\n        },\n        updateTasks(userList){\n            dispatch(updateTasks(userList));\n        }\n    }\n}\n\nclass Home extends Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    async componentWillMount(){\n        this.updateTasks();\n    }\n\n    async componentDidUpdate(){\n        this.updateTasks(); \n    }\n\n    async updateTasks(){\n        const tasks = await axios.get(URL);\n        this.sortTasksByOrder(tasks.data);\n        if (JSON.stringify(tasks.data) == JSON.stringify(this.props.tasks)) return\n        this.props.updateTasks(tasks.data);\n    }\n\n    sortTasksByOrder(taskList){\n        taskList.sort((firstTask, secondTask)=>{\n            return firstTask.order < secondTask.order ? -1 : firstTask.order > secondTask.order ? 1 : 0; \n        });\n    }\n\n    async completeTask(url, completed){\n        await axios.patch(url,\n        {\n            completed\n        });\n        await this.updateTasks();\n    }\n\n    async deleteCompletedTasks(){\n        const completedTasks = this.props.tasks.filter(task=>task.completed);\n        for(const completedTask of completedTasks){\n            await axios.delete(completedTask.url)\n        }\n        if (completedTasks.length === 0){\n            alert('Não existem tarefas completas no momento');\n            return;\n        }\n        await this.updateTasks();\n    }\n\n    async editTask(url, title){\n        if (title.length === 0) {\n            alert('A tarefa deve ter um título');\n        }\n        await axios.patch(url,\n        {\n            title\n        });\n        await this.updateTasks();\n    }\n\n    async deleteTask(url){\n        const confirmation = window.confirm('Tem certeza que deseja excluir?');\n        if (confirmation){\n            await axios.delete(url);\n            await this.updateTasks();\n        }\n    }\n\n    filterTasksCompleteds(){\n        return this.props.tasks.filter(task=>task.completed);\n    }\n\n    filterTasksNotCompleteds(){\n        return this.props.tasks.filter(task=>!task.completed);\n    }\n\n    render(){\n        return(\n            <>\n            {\n\n            }\n            <Spinner animation=\"border\" variant=\"info\" style={{position: 'absolute', zIndex: '1', left: '50%', top: '40%'}}/>\n            <Card>\n                <Card.Header>\n                    <Nav variant=\"tabs\" defaultActiveKey=\"#first\">\n                    <Nav.Item>\n                        <Nav.Link active={this.props.whichTableIsVisible === 1 ? true : false} onClick={() => this.props.changeVision(1)}><ListTask/></Nav.Link>\n                    </Nav.Item>\n                    <Nav.Item>\n                        <Nav.Link active={this.props.whichTableIsVisible === 2 ? true : false} onClick={() => this.props.changeVision(2)}><Exclamation/></Nav.Link>\n                    </Nav.Item>\n                    <Nav.Item>\n                        <Nav.Link active={this.props.whichTableIsVisible === 3 ? true : false} onClick={() => this.props.changeVision(3)}><Check/></Nav.Link>\n                    </Nav.Item>\n                    <Nav.Item>\n                        <Nav.Link active={this.props.whichTableIsVisible === 4 ? true : false} onClick={() => this.props.changeVision(4)}><CardText/></Nav.Link>\n                    </Nav.Item>\n                    </Nav>\n                </Card.Header>\n                <Card.Body>\n                    {this.props.whichTableIsVisible === 1 ? \n                    <Table\n                        title='Tarefas'\n                        deleteTask={url=>this.deleteTask(url)} \n                        completeTask={(url, completed)=>this.completeTask(url, completed)} \n                        editTask={(url, title)=>this.editTask(url, title)}\n                        tasks={this.props.tasks} \n                        completed='trueAndFalse'\n                        deleteCompletedTasks={()=>this.deleteCompletedTasks()}/> \n                    : this.props.whichTableIsVisible === 2 ? \n                    <Table\n                        title='A fazer'\n                        deleteTask={url=>this.deleteTask(url)} \n                        completeTask={(url, completed)=>this.completeTask(url, completed)}\n                        editTask={(url, title)=>this.editTask(url, title)}\n                        tasks={this.filterTasksNotCompleteds()}\n                        deleteCompletedTasks={()=>this.deleteCompletedTasks()}/> \n                        : this.props.whichTableIsVisible === 3 ? \n                    <Table \n                        title='Conluídas'\n                        deleteTask={url=>this.deleteTask(url)} \n                        completeTask={(url, completed)=>this.completeTask(url, completed)}\n                        editTask={(url, title)=>this.editTask(url, title)}\n                        tasks={this.filterTasksCompleteds()} \n                        completed={true}\n                        deleteCompletedTasks={()=>this.deleteCompletedTasks()}/> \n                    : <Form/>}\n                </Card.Body>\n            </Card>\n            </>\n        )\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)"]},"metadata":{},"sourceType":"module"}