{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _createForOfIteratorHelper from\"/home/lucas/TI/Curso-React-Cod3r/projeto-pessoal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"/home/lucas/TI/Curso-React-Cod3r/projeto-pessoal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/lucas/TI/Curso-React-Cod3r/projeto-pessoal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/lucas/TI/Curso-React-Cod3r/projeto-pessoal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/lucas/TI/Curso-React-Cod3r/projeto-pessoal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/lucas/TI/Curso-React-Cod3r/projeto-pessoal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/lucas/TI/Curso-React-Cod3r/projeto-pessoal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Table from'./templates/Table';import Form from'./templates/Form';//import Alert from './templates/Alert';\nimport{Card,Nav}from'react-bootstrap';import{Check,CardText,ListTask,Exclamation}from'react-bootstrap-icons';import{connect}from'react-redux';import{changeVision as _changeVision}from'../store/actions/whichTableIsVisible';import{updateTasks as _updateTasks}from'../store/actions/tasks';import axios from'axios';var URL='https://todo-backend-express.herokuapp.com/';var mapStateToProps=function mapStateToProps(state){return{whichTableIsVisible:state.whichTableIsVisible.whichTableIsVisible,tasks:state.users.tasks};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{changeVision:function changeVision(trueOrFalse){dispatch(_changeVision(trueOrFalse));},updateTasks:function updateTasks(userList){dispatch(_updateTasks(userList));}};};var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.deleteTask=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var confirmation;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:confirmation=window.confirm('Tem certeza que deseja excluir?');if(!confirmation){_context.next=6;break;}_context.next=4;return axios.delete(url);case 4:_context.next=6;return _this.updateTasks();case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(Home,[{key:\"componentWillMount\",value:function(){var _componentWillMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.updateTasks();case 1:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentWillMount(){return _componentWillMount.apply(this,arguments);}return componentWillMount;}()},{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.updateTasks();case 1:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidUpdate(){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()},{key:\"updateTasks\",value:function(){var _updateTasks2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var tasks;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get(URL);case 2:tasks=_context4.sent;this.sortTasksByOrder(tasks.data);if(!(JSON.stringify(tasks.data)==JSON.stringify(this.props.tasks))){_context4.next=6;break;}return _context4.abrupt(\"return\");case 6:this.props.updateTasks(tasks.data);case 7:case\"end\":return _context4.stop();}}},_callee4,this);}));function updateTasks(){return _updateTasks2.apply(this,arguments);}return updateTasks;}()},{key:\"sortTasksByOrder\",value:function sortTasksByOrder(taskList){taskList.sort(function(firstTask,secondTask){return firstTask.order<secondTask.order?-1:firstTask.order>secondTask.order?1:0;});}},{key:\"completeTask\",value:function(){var _completeTask=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(url,completed){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.patch(url,{completed:completed});case 2:_context5.next=4;return this.updateTasks();case 4:case\"end\":return _context5.stop();}}},_callee5,this);}));function completeTask(_x2,_x3){return _completeTask.apply(this,arguments);}return completeTask;}()},{key:\"deleteCompletedTasks\",value:function(){var _deleteCompletedTasks=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var completedTasks,_iterator,_step,completedTask;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:completedTasks=this.props.tasks.filter(function(task){return task.completed;});_iterator=_createForOfIteratorHelper(completedTasks);_context6.prev=2;_iterator.s();case 4:if((_step=_iterator.n()).done){_context6.next=10;break;}completedTask=_step.value;_context6.next=8;return axios.delete(completedTask.url);case 8:_context6.next=4;break;case 10:_context6.next=15;break;case 12:_context6.prev=12;_context6.t0=_context6[\"catch\"](2);_iterator.e(_context6.t0);case 15:_context6.prev=15;_iterator.f();return _context6.finish(15);case 18:if(!(completedTasks.length===0)){_context6.next=21;break;}alert('Não existem tarefas completas no momento');return _context6.abrupt(\"return\");case 21:_context6.next=23;return this.updateTasks();case 23:case\"end\":return _context6.stop();}}},_callee6,this,[[2,12,15,18]]);}));function deleteCompletedTasks(){return _deleteCompletedTasks.apply(this,arguments);}return deleteCompletedTasks;}()},{key:\"editTask\",value:function(){var _editTask=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(url,title){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(title.length===0){alert('A tarefa deve ter um título');}_context7.next=3;return axios.patch(url,{title:title});case 3:_context7.next=5;return this.updateTasks();case 5:case\"end\":return _context7.stop();}}},_callee7,this);}));function editTask(_x4,_x5){return _editTask.apply(this,arguments);}return editTask;}()},{key:\"filterTasksCompleteds\",value:function filterTasksCompleteds(){return this.props.tasks.filter(function(task){return task.completed;});}},{key:\"filterTasksNotCompleteds\",value:function filterTasksNotCompleteds(){return this.props.tasks.filter(function(task){return!task.completed;});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(Nav,{variant:\"tabs\",defaultActiveKey:\"#first\",children:[/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{active:this.props.whichTableIsVisible===1?true:false,onClick:function onClick(){return _this2.props.changeVision(1);},children:/*#__PURE__*/_jsx(ListTask,{})})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{active:this.props.whichTableIsVisible===2?true:false,onClick:function onClick(){return _this2.props.changeVision(2);},children:/*#__PURE__*/_jsx(Exclamation,{})})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{active:this.props.whichTableIsVisible===3?true:false,onClick:function onClick(){return _this2.props.changeVision(3);},children:/*#__PURE__*/_jsx(Check,{})})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{active:this.props.whichTableIsVisible===4?true:false,onClick:function onClick(){return _this2.props.changeVision(4);},children:/*#__PURE__*/_jsx(CardText,{})})})]})}),/*#__PURE__*/_jsx(Card.Body,{children:this.props.whichTableIsVisible===1?/*#__PURE__*/_jsx(Table,{title:\"Tarefas\",deleteTask:function deleteTask(url){return _this2.deleteTask(url);},completeTask:function completeTask(url,completed){return _this2.completeTask(url,completed);},editTask:function editTask(url,title){return _this2.editTask(url,title);},tasks:this.props.tasks,completed:\"trueAndFalse\",deleteCompletedTasks:function deleteCompletedTasks(){return _this2.deleteCompletedTasks();}}):this.props.whichTableIsVisible===2?/*#__PURE__*/_jsx(Table,{title:\"A fazer\",deleteTask:function deleteTask(url){return _this2.deleteTask(url);},completeTask:function completeTask(url,completed){return _this2.completeTask(url,completed);},editTask:function editTask(url,title){return _this2.editTask(url,title);},tasks:this.filterTasksNotCompleteds(),deleteCompletedTasks:function deleteCompletedTasks(){return _this2.deleteCompletedTasks();}}):this.props.whichTableIsVisible===3?/*#__PURE__*/_jsx(Table,{title:\"Conlu\\xEDdas\",deleteTask:function deleteTask(url){return _this2.deleteTask(url);},completeTask:function completeTask(url,completed){return _this2.completeTask(url,completed);},editTask:function editTask(url,title){return _this2.editTask(url,title);},tasks:this.filterTasksCompleteds(),completed:true,deleteCompletedTasks:function deleteCompletedTasks(){return _this2.deleteCompletedTasks();}}):/*#__PURE__*/_jsx(Form,{})})]})});}}]);return Home;}(Component);export default connect(mapStateToProps,mapDispatchToProps)(Home);","map":{"version":3,"sources":["/home/lucas/TI/Curso-React-Cod3r/projeto-pessoal/src/components/Home.js"],"names":["React","Component","Table","Form","Card","Nav","Check","CardText","ListTask","Exclamation","connect","changeVision","updateTasks","axios","URL","mapStateToProps","state","whichTableIsVisible","tasks","users","mapDispatchToProps","dispatch","trueOrFalse","userList","Home","props","deleteTask","url","confirmation","window","confirm","delete","get","sortTasksByOrder","data","JSON","stringify","taskList","sort","firstTask","secondTask","order","completed","patch","completedTasks","filter","task","completedTask","length","alert","title","completeTask","editTask","deleteCompletedTasks","filterTasksNotCompleteds","filterTasksCompleteds"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Table from './templates/Table';\nimport Form from './templates/Form';\n//import Alert from './templates/Alert';\n\nimport {Card, Nav} from 'react-bootstrap';\nimport {Check, CardText, ListTask, Exclamation} from 'react-bootstrap-icons';\n\nimport {connect} from 'react-redux';\nimport {changeVision} from '../store/actions/whichTableIsVisible';\nimport {updateTasks} from '../store/actions/tasks';\n\nimport axios from 'axios';\n\nconst URL = 'https://todo-backend-express.herokuapp.com/';\n\nconst mapStateToProps = state =>{\n    return {\n        whichTableIsVisible: state.whichTableIsVisible.whichTableIsVisible,\n        tasks: state.users.tasks\n    }\n}\n\nconst mapDispatchToProps = dispatch =>{\n    return {\n        changeVision(trueOrFalse) {\n            dispatch(changeVision(trueOrFalse));\n        },\n        updateTasks(userList){\n            dispatch(updateTasks(userList));\n        }\n    }\n}\n\nclass Home extends Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    async componentWillMount(){\n        this.updateTasks();\n    }\n\n    async componentDidUpdate(){\n        this.updateTasks(); \n    }\n\n    async updateTasks(){\n        const tasks = await axios.get(URL);\n        this.sortTasksByOrder(tasks.data);\n        if (JSON.stringify(tasks.data) == JSON.stringify(this.props.tasks)) return\n        this.props.updateTasks(tasks.data);\n    }\n\n    sortTasksByOrder(taskList){\n        taskList.sort((firstTask, secondTask)=>{\n            return firstTask.order < secondTask.order ? -1 : firstTask.order > secondTask.order ? 1 : 0; \n        });\n    }\n\n    async completeTask(url, completed){\n        await axios.patch(url,\n        {\n            completed\n        });\n        await this.updateTasks();\n    }\n\n    async deleteCompletedTasks(){\n        const completedTasks = this.props.tasks.filter(task=>task.completed);\n        for(const completedTask of completedTasks){\n            await axios.delete(completedTask.url)\n        }\n        if (completedTasks.length === 0){\n            alert('Não existem tarefas completas no momento');\n            return;\n        }\n        await this.updateTasks();\n    }\n\n    async editTask(url, title){\n        if (title.length === 0) {\n            alert('A tarefa deve ter um título');\n        }\n        await axios.patch(url,\n        {\n            title\n        });\n        await this.updateTasks();\n    }\n\n    deleteTask = async (url)=>{\n        const confirmation = window.confirm('Tem certeza que deseja excluir?');\n        if (confirmation){\n            await axios.delete(url);\n            await this.updateTasks();\n        }\n    }\n\n    filterTasksCompleteds(){\n        return this.props.tasks.filter(task=>task.completed);\n    }\n\n    filterTasksNotCompleteds(){\n        return this.props.tasks.filter(task=>!task.completed);\n    }\n\n    render(){\n        return(\n            <>\n            <Card>\n                <Card.Header>\n                    <Nav variant=\"tabs\" defaultActiveKey=\"#first\">\n                    <Nav.Item>\n                        <Nav.Link active={this.props.whichTableIsVisible === 1 ? true : false} onClick={() => this.props.changeVision(1)}><ListTask/></Nav.Link>\n                    </Nav.Item>\n                    <Nav.Item>\n                        <Nav.Link active={this.props.whichTableIsVisible === 2 ? true : false} onClick={() => this.props.changeVision(2)}><Exclamation/></Nav.Link>\n                    </Nav.Item>\n                    <Nav.Item>\n                        <Nav.Link active={this.props.whichTableIsVisible === 3 ? true : false} onClick={() => this.props.changeVision(3)}><Check/></Nav.Link>\n                    </Nav.Item>\n                    <Nav.Item>\n                        <Nav.Link active={this.props.whichTableIsVisible === 4 ? true : false} onClick={() => this.props.changeVision(4)}><CardText/></Nav.Link>\n                    </Nav.Item>\n                    </Nav>\n                </Card.Header>\n                <Card.Body>\n                    {this.props.whichTableIsVisible === 1 ? \n                    <Table\n                        title='Tarefas'\n                        deleteTask={url=>this.deleteTask(url)} \n                        completeTask={(url, completed)=>this.completeTask(url, completed)} \n                        editTask={(url, title)=>this.editTask(url, title)}\n                        tasks={this.props.tasks} \n                        completed='trueAndFalse'\n                        deleteCompletedTasks={()=>this.deleteCompletedTasks()}/> \n                    : this.props.whichTableIsVisible === 2 ? \n                    <Table\n                        title='A fazer'\n                        deleteTask={url=>this.deleteTask(url)} \n                        completeTask={(url, completed)=>this.completeTask(url, completed)}\n                        editTask={(url, title)=>this.editTask(url, title)}\n                        tasks={this.filterTasksNotCompleteds()}\n                        deleteCompletedTasks={()=>this.deleteCompletedTasks()}/> \n                        : this.props.whichTableIsVisible === 3 ? \n                    <Table \n                        title='Conluídas'\n                        deleteTask={url=>this.deleteTask(url)} \n                        completeTask={(url, completed)=>this.completeTask(url, completed)}\n                        editTask={(url, title)=>this.editTask(url, title)}\n                        tasks={this.filterTasksCompleteds()} \n                        completed={true}\n                        deleteCompletedTasks={()=>this.deleteCompletedTasks()}/> \n                    : <Form/>}\n                </Card.Body>\n            </Card>\n            </>\n        )\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)"]},"metadata":{},"sourceType":"module"}